<!DOCTYPE html>
<!-- Generated by pkgdown: do not edit by hand --><html lang="en">
<head>
<meta http-equiv="Content-Type" content="text/html; charset=UTF-8">
<meta charset="utf-8">
<meta http-equiv="X-UA-Compatible" content="IE=edge">
<meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no">
<meta name="description" content="NutritionTools">
<title>Fuzzy-Matcher-Guide • NutritionTools</title>
<!-- favicons --><link rel="icon" type="image/png" sizes="16x16" href="../favicon-16x16.png">
<link rel="icon" type="image/png" sizes="32x32" href="../favicon-32x32.png">
<link rel="apple-touch-icon" type="image/png" sizes="180x180" href="../apple-touch-icon.png">
<link rel="apple-touch-icon" type="image/png" sizes="120x120" href="../apple-touch-icon-120x120.png">
<link rel="apple-touch-icon" type="image/png" sizes="76x76" href="../apple-touch-icon-76x76.png">
<link rel="apple-touch-icon" type="image/png" sizes="60x60" href="../apple-touch-icon-60x60.png">
<script src="../deps/jquery-3.6.0/jquery-3.6.0.min.js"></script><meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no">
<link href="../deps/bootstrap-5.3.1/bootstrap.min.css" rel="stylesheet">
<script src="../deps/bootstrap-5.3.1/bootstrap.bundle.min.js"></script><!-- Font Awesome icons --><link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/5.12.1/css/all.min.css" integrity="sha256-mmgLkCYLUQbXn0B1SRqzHar6dCnv9oZFPEC1g1cwlkk=" crossorigin="anonymous">
<link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/5.12.1/css/v4-shims.min.css" integrity="sha256-wZjR52fzng1pJHwx4aV2AO3yyTOXrcDW7jBpJtTwVxw=" crossorigin="anonymous">
<!-- bootstrap-toc --><script src="https://cdn.jsdelivr.net/gh/afeld/bootstrap-toc@v1.0.1/dist/bootstrap-toc.min.js" integrity="sha256-4veVQbu7//Lk5TSmc7YV48MxtMy98e26cf5MrgZYnwo=" crossorigin="anonymous"></script><!-- headroom.js --><script src="https://cdnjs.cloudflare.com/ajax/libs/headroom/0.11.0/headroom.min.js" integrity="sha256-AsUX4SJE1+yuDu5+mAVzJbuYNPHj/WroHuZ8Ir/CkE0=" crossorigin="anonymous"></script><script src="https://cdnjs.cloudflare.com/ajax/libs/headroom/0.11.0/jQuery.headroom.min.js" integrity="sha256-ZX/yNShbjqsohH1k95liqY9Gd8uOiE1S4vZc+9KQ1K4=" crossorigin="anonymous"></script><!-- clipboard.js --><script src="https://cdnjs.cloudflare.com/ajax/libs/clipboard.js/2.0.6/clipboard.min.js" integrity="sha256-inc5kl9MA1hkeYUt+EC3BhlIgyp/2jDIyBLS6k3UxPI=" crossorigin="anonymous"></script><!-- search --><script src="https://cdnjs.cloudflare.com/ajax/libs/fuse.js/6.4.6/fuse.js" integrity="sha512-zv6Ywkjyktsohkbp9bb45V6tEMoWhzFzXis+LrMehmJZZSys19Yxf1dopHx7WzIKxr5tK2dVcYmaCk2uqdjF4A==" crossorigin="anonymous"></script><script src="https://cdnjs.cloudflare.com/ajax/libs/autocomplete.js/0.38.0/autocomplete.jquery.min.js" integrity="sha512-GU9ayf+66Xx2TmpxqJpliWbT5PiGYxpaG8rfnBEk1LL8l1KGkRShhngwdXK1UgqhAzWpZHSiYPc09/NwDQIGyg==" crossorigin="anonymous"></script><script src="https://cdnjs.cloudflare.com/ajax/libs/mark.js/8.11.1/mark.min.js" integrity="sha512-5CYOlHXGh6QpOFA/TeTylKLWfB3ftPsde7AnmhuitiTX4K5SqCLBeKro6sPS8ilsz1Q4NRx3v8Ko2IBiszzdww==" crossorigin="anonymous"></script><!-- pkgdown --><script src="../pkgdown.js"></script><meta property="og:title" content="Fuzzy-Matcher-Guide">
<meta property="og:description" content="NutritionTools">
<meta property="og:image" content="https://tomcodd.github.io/NutritionTools/logo.png">
<!-- mathjax --><script src="https://cdnjs.cloudflare.com/ajax/libs/mathjax/2.7.5/MathJax.js" integrity="sha256-nvJJv9wWKEm88qvoQl9ekL2J+k/RWIsaSScxxlsrv8k=" crossorigin="anonymous"></script><script src="https://cdnjs.cloudflare.com/ajax/libs/mathjax/2.7.5/config/TeX-AMS-MML_HTMLorMML.js" integrity="sha256-84DKXVJXs0/F8OTMzX4UR909+jtl4G7SPypPavF+GfA=" crossorigin="anonymous"></script><!--[if lt IE 9]>
<script src="https://oss.maxcdn.com/html5shiv/3.7.3/html5shiv.min.js"></script>
<script src="https://oss.maxcdn.com/respond/1.4.2/respond.min.js"></script>
<![endif]-->
</head>
<body>
    <a href="#main" class="visually-hidden-focusable">Skip to contents</a>
    

    <nav class="navbar fixed-top navbar-light navbar-expand-lg bg-light"><div class="container">
    
    <a class="navbar-brand me-2" href="../index.html">NutritionTools</a>

    <small class="nav-text text-muted me-auto" data-bs-toggle="tooltip" data-bs-placement="bottom" title="">1.0.1</small>

    
    <button class="navbar-toggler" type="button" data-bs-toggle="collapse" data-bs-target="#navbar" aria-controls="navbar" aria-expanded="false" aria-label="Toggle navigation">
      <span class="navbar-toggler-icon"></span>
    </button>

    <div id="navbar" class="collapse navbar-collapse ms-3">
      <ul class="navbar-nav me-auto">
<li class="nav-item">
  <a class="nav-link" href="../reference/index.html">Reference</a>
</li>
<li class="active nav-item dropdown">
  <a href="#" class="nav-link dropdown-toggle" data-bs-toggle="dropdown" role="button" aria-expanded="false" aria-haspopup="true" id="dropdown-articles">Articles</a>
  <div class="dropdown-menu" aria-labelledby="dropdown-articles">
    <a class="dropdown-item" href="../articles/Fuzzy-Matcher-Guide.html">Fuzzy-Matcher-Guide</a>
  </div>
</li>
      </ul>
<form class="form-inline my-2 my-lg-0" role="search">
        <input type="search" class="form-control me-sm-2" aria-label="Toggle navigation" name="search-input" data-search-index="../search.json" id="search-input" placeholder="Search for" autocomplete="off">
</form>

      <ul class="navbar-nav">
<li class="nav-item">
  <a class="external-link nav-link" href="https://github.com/TomCodd/NutritionTools/" aria-label="github">
    <span class="fab fa fab fa-github fa-lg"></span>
     
  </a>
</li>
      </ul>
</div>

    
  </div>
</nav><div class="container template-article">




<div class="row">
  <main id="main" class="col-md-9"><div class="page-header">
      <img src="../logo.png" class="logo" alt=""><h1>Fuzzy-Matcher-Guide</h1>
            
      
      <small class="dont-index">Source: <a href="https://github.com/TomCodd/NutritionTools/blob/HEAD/vignettes/Fuzzy-Matcher-Guide.Rmd" class="external-link"><code>vignettes/Fuzzy-Matcher-Guide.Rmd</code></a></small>
      <div class="d-none name"><code>Fuzzy-Matcher-Guide.Rmd</code></div>
    </div>

    
    
<div class="section level2">
<h2 id="fuzzy-matcher-guide">Fuzzy Matcher Guide<a class="anchor" aria-label="anchor" href="#fuzzy-matcher-guide"></a>
</h2>
<div class="section level3">
<h3 id="introduction">Introduction<a class="anchor" aria-label="anchor" href="#introduction"></a>
</h3>
<p>Because of the Fuzzy Matchers GUI interface, the standard R function
documentation is ill-suited to helping with its use. Instead this guide
has been created to guide you through using this function.</p>
</div>
<div class="section level3">
<h3 id="data-prep">Data Prep<a class="anchor" aria-label="anchor" href="#data-prep"></a>
</h3>
<p>The first step of using the Fuzzy Matcher is to prepare the datasets
you would like to match. The Fuzzy Matcher requires two different data
frames as its input, with an optional key word. In this example, we will
create two data frames and then match items between them.</p>
<div class="section level4">
<h4 id="r-setup">R setup<a class="anchor" aria-label="anchor" href="#r-setup"></a>
</h4>
<p>First we load the required packages. NutritionTools is this package,
which contains Fuzzy Matcher, which we need. dplyr is a package which is
widely used and contains many useful tools. It is also a dependency of
NutritionTools, so should already be installed on your system. Because
some of the data prep methods can be done with dplyr instead of base R,
both methods will be shown - requiring it to be called now.</p>
<div class="sourceCode" id="cb1"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="kw"><a href="https://rdrr.io/r/base/library.html" class="external-link">library</a></span><span class="op">(</span><span class="va"><a href="https://github.com/TomCodd/NutritionTools" class="external-link">NutritionTools</a></span><span class="op">)</span></span>
<span><span class="kw"><a href="https://rdrr.io/r/base/library.html" class="external-link">library</a></span><span class="op">(</span><span class="va"><a href="https://dplyr.tidyverse.org" class="external-link">dplyr</a></span><span class="op">)</span></span></code></pre></div>
<p>Then, we will create two example data frames - breakfast_df and
extensive_food_db. These will be the data frames we are matching
against.</p>
<div class="sourceCode" id="cb2"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="va">breakfast_df</span> <span class="op">&lt;-</span></span>
<span>  <span class="fu"><a href="https://rdrr.io/r/base/data.frame.html" class="external-link">data.frame</a></span><span class="op">(</span></span>
<span>    <span class="st">"ID"</span> <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/c.html" class="external-link">c</a></span><span class="op">(</span></span>
<span>      <span class="st">"test_01"</span>,</span>
<span>      <span class="st">"test_02"</span>,</span>
<span>      <span class="st">"test_03"</span>,</span>
<span>      <span class="st">"test_04"</span>,</span>
<span>      <span class="st">"test_05"</span>,</span>
<span>      <span class="st">"test_06"</span>,</span>
<span>      <span class="st">"test_07"</span></span>
<span>    <span class="op">)</span>,</span>
<span>    <span class="st">"food_name"</span> <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/c.html" class="external-link">c</a></span><span class="op">(</span></span>
<span>      <span class="st">"Wholemeal Bread"</span>,</span>
<span>      <span class="st">"Ground Pepper"</span>,</span>
<span>      <span class="st">"whole milk"</span>,</span>
<span>      <span class="st">"Orange Juice"</span>,</span>
<span>      <span class="st">"Butter, salted"</span>,</span>
<span>      <span class="st">"Salt"</span>,</span>
<span>      <span class="st">"Eggs"</span></span>
<span>    <span class="op">)</span>,</span>
<span>    <span class="st">"CART B (mcg)"</span> <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/c.html" class="external-link">c</a></span><span class="op">(</span><span class="cn">NA</span>, <span class="fl">105</span>, <span class="st">""</span>, <span class="fl">130</span>, <span class="cn">NA</span>, <span class="st">""</span>, <span class="fl">111</span><span class="op">)</span>,</span>
<span>    <span class="st">"CART A (mcg)"</span> <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/c.html" class="external-link">c</a></span><span class="op">(</span><span class="fl">0</span>, <span class="fl">35</span>, <span class="fl">23</span>, <span class="fl">27</span>, <span class="fl">6</span>, <span class="fl">34</span>, <span class="cn">NA</span><span class="op">)</span>,</span>
<span>    <span class="st">"CRYPXB (mcg)"</span> <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/c.html" class="external-link">c</a></span><span class="op">(</span><span class="fl">110</span>, <span class="fl">67</span>, <span class="fl">72</span>, <span class="cn">NA</span>, <span class="fl">160</span>, <span class="fl">102</span>, <span class="fl">98</span><span class="op">)</span>,</span>
<span>    <span class="st">"CART B eq (std) (mcg)"</span> <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/c.html" class="external-link">c</a></span><span class="op">(</span><span class="st">""</span>, <span class="fl">107</span>, <span class="fl">102</span>, <span class="cn">NA</span>, <span class="st">""</span>, <span class="cn">NA</span>, <span class="fl">72</span><span class="op">)</span>,</span>
<span>    <span class="st">"CART B eq (mcg)"</span> <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/c.html" class="external-link">c</a></span><span class="op">(</span><span class="fl">159</span>, <span class="fl">103</span>, <span class="fl">132</span>, <span class="cn">NA</span>, <span class="st">""</span>, <span class="st">""</span>, <span class="st">""</span><span class="op">)</span>,</span>
<span>    <span class="st">"Vit A RAE (mcg)"</span> <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/c.html" class="external-link">c</a></span><span class="op">(</span><span class="fl">13</span>, <span class="fl">8</span>, <span class="cn">NA</span>, <span class="fl">15</span>, <span class="fl">13</span>, <span class="cn">NA</span>, <span class="cn">NA</span><span class="op">)</span>,</span>
<span>    <span class="st">"Vit A (mcg)"</span> <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/c.html" class="external-link">c</a></span><span class="op">(</span><span class="fl">12</span>, <span class="fl">11</span>, <span class="fl">8</span>, <span class="fl">13</span>, <span class="fl">3</span>, <span class="fl">1</span>, <span class="fl">10</span><span class="op">)</span>,</span>
<span>    <span class="st">"Retinol (mcg)"</span> <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/c.html" class="external-link">c</a></span><span class="op">(</span><span class="fl">0</span>, <span class="fl">7</span>, <span class="fl">12</span>, <span class="cn">NA</span>, <span class="fl">5</span>, <span class="fl">2</span>, <span class="fl">10</span><span class="op">)</span>,</span>
<span>    <span class="st">"comments"</span> <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/c.html" class="external-link">c</a></span><span class="op">(</span></span>
<span>      <span class="st">"Imaginary values"</span>,</span>
<span>      <span class="st">"Completely fictional values"</span>,</span>
<span>      <span class="st">"Fictional values #2"</span>,</span>
<span>      <span class="st">"More fictional values"</span>,</span>
<span>      <span class="st">"Fictional #4"</span>,</span>
<span>      <span class="st">"Fictional no. 5"</span>,</span>
<span>      <span class="st">"fictional 6"</span></span>
<span>    <span class="op">)</span>, check.names <span class="op">=</span> <span class="cn">F</span></span>
<span>  <span class="op">)</span></span>
<span></span>
<span><span class="va">extensive_food_db</span> <span class="op">&lt;-</span> <span class="fu"><a href="https://rdrr.io/r/base/data.frame.html" class="external-link">data.frame</a></span><span class="op">(</span></span>
<span>    <span class="st">"item_ID"</span> <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/c.html" class="external-link">c</a></span><span class="op">(</span></span>
<span>      <span class="st">"01_01"</span>,</span>
<span>      <span class="st">"01_02"</span>,</span>
<span>      <span class="st">"01_03"</span>,</span>
<span>      <span class="st">"01_04"</span>,</span>
<span>      <span class="st">"01_05"</span>,</span>
<span>      <span class="st">"01_06"</span>,</span>
<span>      <span class="st">"01_07"</span>,</span>
<span>      <span class="st">"01_08"</span>,</span>
<span>      <span class="st">"01_09"</span>,</span>
<span>      <span class="st">"01_10"</span>,</span>
<span>      <span class="st">"01_11"</span>,</span>
<span>      <span class="st">"01_12"</span>,</span>
<span>      <span class="st">"01_13"</span>,</span>
<span>      <span class="st">"01_14"</span>,</span>
<span>      <span class="st">"01_15"</span>,</span>
<span>      <span class="st">"01_16"</span>,</span>
<span>      <span class="st">"01_17"</span>,</span>
<span>      <span class="st">"01_18"</span>,</span>
<span>      <span class="st">"01_19"</span>,</span>
<span>      <span class="st">"01_20"</span></span>
<span>    <span class="op">)</span>,</span>
<span>    <span class="st">"food_item_name"</span> <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/c.html" class="external-link">c</a></span><span class="op">(</span></span>
<span>      <span class="st">"Bread (wholemeal)"</span>,</span>
<span>      <span class="st">"Pepper, ground, black"</span>,</span>
<span>      <span class="st">"Milk, cow, whole, fresh, raw"</span>,</span>
<span>      <span class="st">"Orange Juice"</span>,</span>
<span>      <span class="st">"Butter, with salt"</span>,</span>
<span>      <span class="st">"Salt"</span>,</span>
<span>      <span class="st">"Egg, chicken, whole, raw"</span>,</span>
<span>      <span class="st">"Bacon"</span>,</span>
<span>      <span class="st">"Sausage"</span>,</span>
<span>      <span class="st">"Milk, skimmed"</span>,</span>
<span>      <span class="st">"Butter, unsalted"</span>,</span>
<span>      <span class="st">"Bread (white)"</span>,</span>
<span>      <span class="st">"Bread (Brown), wheat flour"</span>,</span>
<span>      <span class="st">"Tomato"</span>,</span>
<span>      <span class="st">"Mushroom"</span>,</span>
<span>      <span class="st">"Parsley"</span>,</span>
<span>      <span class="st">"Tomato, tinned"</span>,</span>
<span>      <span class="st">"Apple Juice"</span>,</span>
<span>      <span class="st">"Pineapple Juice"</span>,</span>
<span>      <span class="st">"Mango Juice"</span></span>
<span>      <span class="op">)</span>,</span>
<span>    <span class="st">"Iron (Fe)"</span> <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/c.html" class="external-link">c</a></span><span class="op">(</span><span class="fl">12</span>, <span class="fl">11</span>, <span class="fl">8</span>, <span class="fl">13</span>, <span class="fl">3</span>, <span class="fl">1</span>, <span class="fl">10</span>, <span class="fl">15</span>, <span class="fl">3</span>, <span class="fl">80</span>, <span class="fl">14</span>, <span class="fl">27</span>, <span class="fl">54</span>, <span class="fl">12</span>, <span class="fl">7</span>, <span class="fl">3</span>, <span class="fl">7</span>, <span class="fl">15</span>, <span class="fl">10</span>, <span class="fl">45</span><span class="op">)</span>,</span>
<span>    <span class="st">"Selenium (Se)"</span> <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/c.html" class="external-link">c</a></span><span class="op">(</span><span class="fl">0</span>, <span class="fl">35</span>, <span class="fl">23</span>, <span class="fl">27</span>, <span class="fl">6</span>, <span class="fl">34</span>, <span class="cn">NA</span>, <span class="fl">23</span>, <span class="fl">10</span>, <span class="fl">8</span>, <span class="fl">6</span>, <span class="fl">15</span>, <span class="cn">NA</span>, <span class="st">""</span>, <span class="fl">20</span>, <span class="fl">12</span>, <span class="fl">18</span>, <span class="fl">20</span>, <span class="fl">12</span>, <span class="fl">20</span><span class="op">)</span>,</span>
<span>    <span class="st">"Zinc (Zn)"</span> <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/c.html" class="external-link">c</a></span><span class="op">(</span><span class="fl">13</span>, <span class="fl">8</span>, <span class="cn">NA</span>, <span class="fl">15</span>, <span class="fl">13</span>, <span class="cn">NA</span>, <span class="cn">NA</span>, <span class="fl">10</span>, <span class="fl">8</span>, <span class="fl">9</span>, <span class="fl">4</span>, <span class="fl">3</span>, <span class="fl">2</span>, <span class="fl">10</span>, <span class="fl">8</span>, <span class="fl">6</span>, <span class="fl">14</span>, <span class="fl">13</span>, <span class="fl">21</span>, <span class="fl">6</span><span class="op">)</span>,</span>
<span>    <span class="st">"comments"</span> <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/c.html" class="external-link">c</a></span><span class="op">(</span></span>
<span>      <span class="st">"These are imaginary"</span>,</span>
<span>      <span class="st">"Really fictional values"</span>,</span>
<span>      <span class="st">"Fictional values again"</span>,</span>
<span>      <span class="st">"More fictions"</span>,</span>
<span>      <span class="st">"imaginary #4"</span>,</span>
<span>      <span class="st">"imaginary no. 5"</span>,</span>
<span>      <span class="st">"imaginary 6"</span>,</span>
<span>      <span class="st">"More fiction"</span>,</span>
<span>      <span class="st">"complete fiction"</span>,</span>
<span>      <span class="st">"again, fantasy"</span>,</span>
<span>      <span class="st">"Fantasy again"</span>,</span>
<span>      <span class="st">"once again, imaginary"</span>,</span>
<span>      <span class="st">"complete fiction"</span>,</span>
<span>      <span class="st">"and again, imaginary"</span>,</span>
<span>      <span class="st">"this ones real (only joking)"</span>,</span>
<span>      <span class="st">"knock knock"</span>,</span>
<span>      <span class="st">"who's there?"</span>,</span>
<span>      <span class="st">"cow says"</span>,</span>
<span>      <span class="st">"cow says who?"</span>,</span>
<span>      <span class="st">"no, cow says moo!"</span></span>
<span>    <span class="op">)</span>, check.names <span class="op">=</span> <span class="cn">F</span></span>
<span>  <span class="op">)</span></span></code></pre></div>
</div>
<div class="section level4">
<h4 id="data-preparation">Data preparation<a class="anchor" aria-label="anchor" href="#data-preparation"></a>
</h4>
<p>The Fuzzy Matcher, as mentioned in its description, has certain data
frame input requirements - namely that the data frames are both 2
columns in size, with the first column being an ID column, and the
second being the food item name. In order to create an ideal data frame,
we will subset the 2 original input columns.</p>
<div class="section level5">
<h5 id="subsetting-with-base-r">Subsetting with base R<a class="anchor" aria-label="anchor" href="#subsetting-with-base-r"></a>
</h5>
<p>This first method only use base R functions.</p>
<div class="sourceCode" id="cb3"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="va">breakfast_df_2col</span> <span class="op">&lt;-</span> <span class="va">breakfast_df</span><span class="op">[</span>,<span class="fu"><a href="https://rdrr.io/r/base/c.html" class="external-link">c</a></span><span class="op">(</span><span class="fl">1</span>,<span class="fl">2</span><span class="op">)</span><span class="op">]</span></span>
<span><span class="va">extensive_food_db_2col</span> <span class="op">&lt;-</span> <span class="va">extensive_food_db</span><span class="op">[</span>,<span class="fu"><a href="https://rdrr.io/r/base/c.html" class="external-link">c</a></span><span class="op">(</span><span class="fl">1</span>,<span class="fl">2</span><span class="op">)</span><span class="op">]</span></span></code></pre></div>
<p>Using the square brackets, we can tell R that we only want two
columns, which we have selected to be columns 1 and 2, in that order -
because column 1 is the ID column we want, and column 2 is the item name
we want. The order of selection is important - if the data frame was set
up differently, and the ID column was, for example, in column 4, and the
item names in column 1, the command would instead be [,c(4,1)] - the
first column in our list is 4 where the ID is, and then the item name
column (1).</p>
</div>
<div class="section level5">
<h5 id="subsetting-with-dplyr">Subsetting with dplyr<a class="anchor" aria-label="anchor" href="#subsetting-with-dplyr"></a>
</h5>
<p>This methods make use of the select function in the dplyr
package.</p>
<div class="sourceCode" id="cb4"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="va">breakfast_df_2col</span> <span class="op">&lt;-</span> <span class="va">breakfast_df</span> <span class="op"><a href="https://magrittr.tidyverse.org/reference/pipe.html" class="external-link">%&gt;%</a></span> <span class="fu"><a href="https://dplyr.tidyverse.org/reference/select.html" class="external-link">select</a></span><span class="op">(</span><span class="st">"ID"</span>, <span class="st">"food_name"</span><span class="op">)</span></span>
<span><span class="va">extensive_food_db_2col</span> <span class="op">&lt;-</span> <span class="va">extensive_food_db</span> <span class="op"><a href="https://magrittr.tidyverse.org/reference/pipe.html" class="external-link">%&gt;%</a></span> <span class="fu"><a href="https://dplyr.tidyverse.org/reference/select.html" class="external-link">select</a></span><span class="op">(</span><span class="st">"item_ID"</span>, <span class="st">"food_item_name"</span><span class="op">)</span></span></code></pre></div>
<p>Using the dplyr select tool, instead of picking the columns we want
by the column numbers, we are instead selecting them by the column names
- once again selecting the ID column name first, and then the food name
column.</p>
<p>Both these methods have identical outputs.</p>
</div>
</div>
</div>
<div class="section level3">
<h3 id="calling-the-fuzzy-matcher">Calling the Fuzzy Matcher<a class="anchor" aria-label="anchor" href="#calling-the-fuzzy-matcher"></a>
</h3>
<p>In order to call the Fuzzy Matcher we simply use the following
command:</p>
<div class="sourceCode" id="cb5"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="fu"><a href="../reference/Fuzzy_Matcher.html">Fuzzy_Matcher</a></span><span class="op">(</span>df1 <span class="op">=</span> <span class="va">breakfast_df_2col</span>, df2 <span class="op">=</span> <span class="va">extensive_food_db_2col</span><span class="op">)</span></span></code></pre></div>
<p>Deciding which data frame is df1 and which is df2 is important in
certain applications. As a general rule the larger dataset should be df2
- the list which items from df1 search through for matches.</p>
<p>Please note: when matching between larger datasets this step can take
a few seconds to process before moving on.</p>
<div class="section level4">
<h4 id="optional-command-focus_term">Optional command: focus_term<a class="anchor" aria-label="anchor" href="#optional-command-focus_term"></a>
</h4>
<p>Once called the Fuzzy Matcher will look at the similarity between
each of the food item names and, if potential matches are close enough,
will rank the top 5 for you to pick through. There is an additional
input command we can use, the focus_term. This is a word you can
specify. If specified, if the word appears in a potential match, then
the selection requirements for showing that match are reduced. This
means that you should have the option to pick from a wider range of
items if a food item name contains the focus_term. This is useful if,
for example, you need to prioritise matching food items which contain
the ‘raw’ term - more potential matches will be shown. These extra
matches are technically ones that the fuzzy matcher doesn’t think are as
good a match, but they still might give you more options for you to
decide between.</p>
<p>If we were to use the focus term in this example, the command would
be:</p>
<div class="sourceCode" id="cb6"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="fu"><a href="../reference/Fuzzy_Matcher.html">Fuzzy_Matcher</a></span><span class="op">(</span>df1 <span class="op">=</span> <span class="va">breakfast_df_2col</span>, df2 <span class="op">=</span> <span class="va">extensive_food_db_2col</span>, focus_term <span class="op">=</span> <span class="st">"raw"</span><span class="op">)</span></span></code></pre></div>
</div>
</div>
<div class="section level3">
<h3 id="matching-using-the-fuzzy-matcher">Matching using the Fuzzy Matcher<a class="anchor" aria-label="anchor" href="#matching-using-the-fuzzy-matcher"></a>
</h3>
<p>Once the potential matches are found, the Fuzzy Matcher will open a
pop-up window, with an interactive table in it.</p>
<p><img src="html-figures/breakfast_FM_table.PNG"></p>
<div class="section level4">
<h4 id="selecting-matches">Selecting Matches<a class="anchor" aria-label="anchor" href="#selecting-matches"></a>
</h4>
<p>The table contains 7 columns - the ID and item name column of df1,
the ID and item name column of df2, a ‘Correct Match’ tickbox column for
you to select the correct potential match from, and a ‘Confidence’
column for you to select the match confidence from.</p>
<p><img src="html-figures/breakfast_FM_table_OJ_confidence.PNG"></p>
<p>Each item from df1 can have up to 5 potential matches from df2 - as
we can see in the above image, as Orange Juice has 3 potential matches;
Orange Juice, Apple Juice, and Mango Juice. In this case we believe
Orange Juice should be matched with Orange Juice, so we select the
tickbox in the row which contains this match. As soon as we do this the
other potential matches for Orange Juice get dropped to the bottom of
the table, and are no longer selectable - this is to prevent accidental
multimatching to a single item.</p>
<p><img src="html-figures/breakfast_FM_table_OJ_selected.PNG"></p>
</div>
<div class="section level4">
<h4 id="match-confidences">Match confidences<a class="anchor" aria-label="anchor" href="#match-confidences"></a>
</h4>
<p>For each match, a confidence value must be selected. There are 3
potential confidence values for you to pick from - High, Medium, and
Low.</p>
<p><img src="html-figures/breakfast_FM_table_OJ_confidence.PNG"></p>
<p>For example, matching <em>‘milk, whole, (cows), raw’</em> to
<em>‘whole, raw cows milk’</em> might be marked as high confidence - we
are sure that all factors of this match are correct. Matching <em>‘whole
cows milk’</em> to <em>‘whole, raw cows milk’</em> might be a medium
confidence match, depending on how important you think it being raw is.
Matching <em>‘milk’</em> to <em>‘whole, raw cows milk’</em> might be low
confidence - we are assuming its cows milk, we’re assuming that its
whole milk, and we’re assuming that its not pasturised. An individual’s
or organisations definition of what constitutes a high, medium or low
match are subjective and potentially use-dependent, but these values
should give a good range of potential inputs to pick from.</p>
<p>We believe that the Orange Juice match is a high confidence match,
and so that is the option we will pick.</p>
</div>
</div>
<div class="section level3">
<h3 id="finishing-the-matching">Finishing the Matching<a class="anchor" aria-label="anchor" href="#finishing-the-matching"></a>
</h3>
<p>Once all the correct matches are completed, the table should look
something like this:</p>
<p><img src="html-figures/breakfast_FM_table_fully_matched.PNG"></p>
<p>Once done select the “All matches identified” button on the top-left
of the page. This will open another pop-up window, giving you a few
options for saving your matches.</p>
<p><img src="html-figures/FM_Save_Options.PNG"></p>
<p>The first option is a checkbox, asking whether you want to strip the
match data back to the bare bones required to relink it to other data -
if this is selected then the output will only contain the item ID from
df1, the item ID from df2, and the match confidence, in a table. If it
isn’t selected then the output will contain the food item names as
well.</p>
<p>Then there is the option to save it as an R object, or save the
matches as a csv. If R object is selected then a data frame output with
the variable name specified in the save options will appear for you to
continue to work on. If the csv option is selected, then a csv will be
created in your R projects root location, with a tidied version of the
save file name you have selected.</p>
<p>Once the options you want have been selected, you have finished using
the Fuzzy Matcher - a new pop-up window will appear with some stats
about the session (number of matches and how long they took), and once
you click the close option, the Fuzzy Matcher will close.</p>
<p><img src="html-figures/FM_close_screen.PNG"></p>
</div>
<div class="section level3">
<h3 id="after-the-fuzzy-matcher">After the Fuzzy Matcher<a class="anchor" aria-label="anchor" href="#after-the-fuzzy-matcher"></a>
</h3>
<p>Once the matches have been outputted, it is easy to re-link the
output to the original files.</p>
<p>The merge tool links items from multiple datasets provided they have
matching ID’s and matching ID column names. The stripped version of the
Fuzzy matcher output automatically restores the ID column names to the
originals for each respective data frame (ID and item_ID), and so this
merging can be done easily.</p>
<p>This code chunk comprises two merges - the first one merging the
fuzzy matcher outputs with the breakfast_df data frame, and then the
output of this merge is merged with the extensive_food_db data
frame.</p>
<p>In this example the Fuzzy Matcher Output was called
‘fuzzy_match_outputs’.</p>
<div class="sourceCode" id="cb7"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="va">fm_outputs_merged</span> <span class="op">&lt;-</span> <span class="fu"><a href="https://rdrr.io/r/base/merge.html" class="external-link">merge</a></span><span class="op">(</span><span class="va">fuzzy_match_outputs</span>, <span class="va">breakfast_df</span>, <span class="st">"ID"</span><span class="op">)</span></span>
<span></span>
<span><span class="va">fm_outputs_merged</span> <span class="op">&lt;-</span> <span class="fu"><a href="https://rdrr.io/r/base/merge.html" class="external-link">merge</a></span><span class="op">(</span><span class="va">fm_outputs_merged</span>, <span class="va">extensive_food_db</span>, <span class="st">"item_ID"</span><span class="op">)</span></span></code></pre></div>
</div>
</div>
  </main><aside class="col-md-3"><nav id="toc"><h2>On this page</h2>
    </nav></aside>
</div>



    <footer><div class="pkgdown-footer-left">
  <p></p>
<p>Developed by Thomas Codd, Lucia Segovia de la Revilla.</p>
</div>

<div class="pkgdown-footer-right">
  <p></p>
<p>Site built with <a href="https://pkgdown.r-lib.org/" class="external-link">pkgdown</a> 2.0.7.</p>
</div>

    </footer>
</div>

  

  

  </body>
</html>
